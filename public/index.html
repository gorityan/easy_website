<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Website Generator - MVP</title>
  <style>
    /* ============================================================
       ãƒªã‚»ãƒƒãƒˆã¨ãƒ™ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«
       ============================================================ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ============================================================
       ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ
       ============================================================ */
    .container {
      width: 100%;
      max-width: 600px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25);
      overflow: hidden;
      animation: slideUp 0.6s ease-out;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(40px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ============================================================
       ãƒ˜ãƒƒãƒ€ãƒ¼
       ============================================================ */
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 40px 30px;
      text-align: center;
    }

    .header h1 {
      font-size: 2rem;
      margin-bottom: 10px;
      font-weight: 700;
    }

    .header p {
      opacity: 0.95;
      font-size: 0.95rem;
    }

    /* ============================================================
       ãƒ•ã‚©ãƒ¼ãƒ éƒ¨åˆ†
       ============================================================ */
    .form-container {
      padding: 40px 30px;
    }

    .form-group {
      margin-bottom: 30px;
      animation: fadeIn 0.5s ease-out forwards;
    }

    .form-group:nth-child(1) { animation-delay: 0.1s; }
    .form-group:nth-child(2) { animation-delay: 0.2s; }
    .form-group:nth-child(3) { animation-delay: 0.3s; }
    .form-group:nth-child(4) { animation-delay: 0.4s; }
    .form-group:nth-child(5) { animation-delay: 0.5s; }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    label {
      display: block;
      font-weight: 600;
      margin-bottom: 10px;
      color: #333;
      font-size: 0.95rem;
    }

    /* ============================================================
       å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
       ============================================================ */
    input[type="text"],
    select {
      width: 100%;
      padding: 12px 14px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 0.95rem;
      font-family: inherit;
      transition: all 0.3s ease;
      background-color: #f9f9f9;
    }

    input[type="text"]:focus,
    select:focus {
      outline: none;
      border-color: #667eea;
      background-color: white;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    input[type="text"]::placeholder {
      color: #999;
    }

    /* ============================================================
       ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹
       ============================================================ */
    select {
      appearance: none;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23667eea"><path d="M7 10l5 5 5-5z"/></svg>');
      background-repeat: no-repeat;
      background-position: right 10px center;
      background-size: 20px;
      padding-right: 35px;
      cursor: pointer;
    }

    /* ============================================================
       ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³
       ============================================================ */
    .radio-group {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .radio-option {
      display: flex;
      align-items: center;
      padding: 15px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      background-color: #f9f9f9;
    }

    .radio-option:hover {
      border-color: #667eea;
      background-color: #f0f2ff;
    }

    .radio-option input[type="radio"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
      margin-right: 12px;
      accent-color: #667eea;
    }

    .radio-option input[type="radio"]:checked + .radio-label {
      color: #667eea;
      font-weight: 600;
    }

    .radio-label {
      cursor: pointer;
      flex: 1;
      transition: color 0.3s ease;
    }

    .radio-description {
      display: block;
      font-size: 0.85rem;
      color: #666;
      margin-top: 4px;
    }

    /* ============================================================
       ãƒœã‚¿ãƒ³
       ============================================================ */
    .button-container {
      margin-top: 40px;
      display: flex;
      gap: 12px;
      animation: fadeIn 0.5s ease-out 0.6s both;
    }

    button {
      flex: 1;
      padding: 14px 20px;
      font-size: 1rem;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: inherit;
    }

    #generateBtn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      box-shadow: 0 8px 16px rgba(102, 126, 234, 0.3);
    }

    #generateBtn:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 12px 24px rgba(102, 126, 234, 0.4);
    }

    #generateBtn:active:not(:disabled) {
      transform: translateY(0);
    }

    #generateBtn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    #resetBtn {
      background-color: #f0f0f0;
      color: #333;
      border: 2px solid #e0e0e0;
    }

    #resetBtn:hover {
      background-color: #e8e8e8;
      border-color: #d0d0d0;
    }

    /* ============================================================
       ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹
       ============================================================ */
    .loading-spinner {
      display: none;
      width: 18px;
      height: 18px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-right: 8px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .loading-spinner.active {
      display: inline-block;
    }

    /* ============================================================
       ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
       ============================================================ */
    .message {
      margin-top: 20px;
      padding: 12px 16px;
      border-radius: 8px;
      display: none;
      font-size: 0.9rem;
      animation: slideDown 0.3s ease-out;
    }

    .message.show {
      display: block;
    }

    .message.success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .message.error {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ============================================================
       ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–
       ============================================================ */
    @media (max-width: 480px) {
      .container {
        border-radius: 12px;
      }

      .header {
        padding: 30px 20px;
      }

      .header h1 {
        font-size: 1.5rem;
      }

      .form-container {
        padding: 25px 20px;
      }

      .button-container {
        flex-direction: column;
      }
    }

    /* ============================================================
       ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£
       ============================================================ */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation: none !important;
        transition: none !important;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸŒ Website Generator</h1>
      <p>ã‚ãªãŸã®ã‚«ã‚¹ã‚¿ãƒ Webã‚µã‚¤ãƒˆã‚’æ•°ç§’ã§ç”Ÿæˆ</p>
    </div>

    <div class="form-container">
      <form id="generatorForm">
        <!-- ã‚µã‚¤ãƒˆã‚¿ã‚¤ãƒˆãƒ« -->
        <div class="form-group">
          <label for="siteTitle">ã‚µã‚¤ãƒˆã‚¿ã‚¤ãƒˆãƒ«</label>
          <input
            type="text"
            id="siteTitle"
            name="siteTitle"
            placeholder="ä¾‹ï¼šMy Awesome Website"
            required
          />
        </div>

        <!-- ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ -->
        <div class="form-group">
          <label for="themeColor">ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼</label>
          <select id="themeColor" name="themeColor" required>
            <option value="">-- é¸æŠã—ã¦ãã ã•ã„ --</option>
            <option value="red">ğŸ”´ ãƒ¬ãƒƒãƒ‰</option>
            <option value="blue">ğŸ”µ ãƒ–ãƒ«ãƒ¼</option>
            <option value="green">ğŸŸ¢ ã‚°ãƒªãƒ¼ãƒ³</option>
          </select>
        </div>

        <!-- ãƒ¡ã‚¤ãƒ³è¦‹å‡ºã— -->
        <div class="form-group">
          <label for="mainHeading">ãƒ¡ã‚¤ãƒ³è¦‹å‡ºã—</label>
          <input
            type="text"
            id="mainHeading"
            name="mainHeading"
            placeholder="ä¾‹ï¼šWelcome to My Site"
            required
          />
        </div>

        <!-- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆé¸æŠ -->
        <div class="form-group">
          <label>ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹æˆ</label>
          <div class="radio-group">
            <div class="radio-option">
              <input
                type="radio"
                id="layoutA"
                name="layout"
                value="layoutA"
                required
              />
              <label for="layoutA" class="radio-label">
                ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆA
                <span class="radio-description">ç”»åƒå·¦ãƒ»ãƒ†ã‚­ã‚¹ãƒˆå³</span>
              </label>
            </div>
            <div class="radio-option">
              <input
                type="radio"
                id="layoutB"
                name="layout"
                value="layoutB"
              />
              <label for="layoutB" class="radio-label">
                ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆB
                <span class="radio-description">ãƒ†ã‚­ã‚¹ãƒˆä¸Šãƒ»ç”»åƒä¸‹</span>
              </label>
            </div>
          </div>
        </div>

        <!-- ãƒœã‚¿ãƒ³ -->
        <div class="button-container">
          <button type="submit" id="generateBtn">
            <span class="loading-spinner"></span>
            ã‚µã‚¤ãƒˆã‚’ç”Ÿæˆã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
          </button>
          <button type="reset" id="resetBtn">ãƒªã‚»ãƒƒãƒˆ</button>
        </div>

        <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
        <div id="message" class="message"></div>
      </form>
    </div>
  </div>

  <script>
    // ============================================================
    // ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰JavaScript
    // ============================================================

    const form = document.getElementById('generatorForm');
    const generateBtn = document.getElementById('generateBtn');
    const messageDiv = document.getElementById('message');
    const loadingSpinner = document.querySelector('.loading-spinner');

    /**
     * ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
     */
    function showMessage(text, type = 'success') {
      messageDiv.textContent = text;
      messageDiv.className = `message show ${type}`;

      // 3ç§’å¾Œã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’éè¡¨ç¤º
      setTimeout(() => {
        messageDiv.classList.remove('show');
      }, 3000);
    }

    /**
     * ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã®å‡¦ç†
     */
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–ã—ã¦ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã‚’è¡¨ç¤º
      generateBtn.disabled = true;
      loadingSpinner.classList.add('active');
      generateBtn.textContent = 'ç”Ÿæˆä¸­...';

      try {
        // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
        const formData = new FormData(form);
        const data = {
          siteTitle: formData.get('siteTitle'),
          themeColor: formData.get('themeColor'),
          mainHeading: formData.get('mainHeading'),
          layout: formData.get('layout')
        };

        // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        if (!data.siteTitle.trim() || !data.themeColor || !data.mainHeading.trim() || !data.layout) {
          throw new Error('ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        }

        // APIã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡
        const response = await fetch('/api/generate', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
        });

        // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒOKã§ãªã„å ´åˆ
        if (!response.ok) {
          throw new Error(`ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼: ${response.status}`);
        }

        // HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `website-${Date.now()}.html`;
        document.body.appendChild(a);
        a.click();
        window.URL.revokeObjectURL(url);
        document.body.removeChild(a);

        showMessage('âœ… ã‚µã‚¤ãƒˆã®ç”Ÿæˆã¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã—ã¾ã—ãŸï¼', 'success');

      } catch (error) {
        console.error('Error:', error);
        showMessage(`âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ${error.message}`, 'error');

      } finally {
        // ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
        generateBtn.disabled = false;
        loadingSpinner.classList.remove('active');
        generateBtn.textContent = 'ã‚µã‚¤ãƒˆã‚’ç”Ÿæˆã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰';
      }
    });

    /**
     * ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã®å‡¦ç†
     */
    document.getElementById('resetBtn').addEventListener('click', () => {
      messageDiv.classList.remove('show');
    });

    /**
     * åˆæœŸåŒ–ï¼šæœ€åˆã®ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯
     */
    document.getElementById('layoutA').checked = true;
  </script>
</body>
</html>
